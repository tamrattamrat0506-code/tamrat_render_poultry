{% load static %}
{% load i18n %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="{% trans 'Ethiopian marketplace - Buy and sell products in Ethiopia' %}">
    <title>{% trans "Sheger.city | Ethiopian Market place" %}</title>
    <link rel="icon" href="{% static 'base/images/image2.jpg' %}" alt="MarketHub logo">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'base/css/base.css' %}">
    {% block css %}{% endblock %}

</head>

<body>
<div id="language-overlay" class="language-overlay hidden">
  <div id="language-popup" class="language-popup">
    <div class="popup-content">
      <p>{% trans "Please select your language" %}:</p>
      <form action="{% url 'set_language' %}" method="post">
        {% csrf_token %}
        <input name="next" type="hidden" value="{{ request.get_full_path }}">
        <select name="language" onchange="submitLanguage(this)">
          {% get_current_language as LANGUAGE_CODE %}
          {% get_available_languages as LANGUAGES %}
          {% for lang_code, lang_name in LANGUAGES %}
            <option value="{{ lang_code }}" {% if lang_code == LANGUAGE_CODE %}selected{% endif %}>
              {{ lang_name }}
            </option>
          {% endfor %}
        </select>
      </form>
      <button onclick="skipPopup()" class="popup-skip">{% trans "Skip" %}</button>
    </div>
  </div>
</div>



    <!-- Top Bar -->
    <div class="top-bar">
        <div class="container">
            <div class="top-bar-content">
                <div class="top-links">
                     <a>
                    <i class="fas fa-clock"></i> <span class="live-clock">{{ now|date:"Y-m-d H:i" }}</span>
                <a>
                    <a href="{% url 'contact:contact_us' %}" class="glowing-link" ><i class="fas fa-headset" aria-hidden="true"></i> {% trans "Contact US" %}</a>
                    <a href="#"><i class="fas fa-truck" aria-hidden="true"></i> +251 975 060 586</a>
                    
                </div>
            </div>
        </div>
    </div>

    <header class="header {% if user.is_not_authenticated %}header-guest{% elif user.is_authenticated and user.is_staff %}header-staf{% elif user.is_authenticated and user.is_superuser %}header-admin{% else %}header-user{% endif %}">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <a href="/" aria-label="Home">
                        <span class="logo-icon"><i class="fas fa-store" aria-hidden="true"></i></span>
                        <span class="logo-text">{% trans "Sheger" %}<span class="hub">{% trans "city" %}</span></span>
                    </a>
                </div>
                <div class="header-actions">
                <div class="search-bar">
    <form action="/" method="get" role="search">
        <label for="search-input" class="sr-only">{% trans "Search products" %}</label>
        <div class="search-input">
            <input type="text" id="search-input" name="q" placeholder="{% trans 'Search for products...' %}" 
                   value="{{ request.GET.q }}">
            <button type="submit" aria-label="Search">
                <i class="fas fa-search"></i>
            </button>
        </div>
    </form>
    <button class="search-toggle" id="searchToggle" aria-label="Toggle search" aria-expanded="false">
        <i class="fas fa-search"></i>
    </button>
</div>

                
                    {% if user.is_authenticated %}
                    <a href="{% url 'conversation:inbox' %}" class="action-btn wishlist-btn" aria-label="Messages">
                        <i class="far fa-envelope"></i>
                        <span class="count" id="navbarUnread">0</span>
                    </a>

                    <a href="{% url 'cart:cart_detail' %}" class="action-btn wishlist-btn">
                        <i class="fas fa-shopping-cart"></i>{{ cart_item_count|default:0 }}
                    </a>
                    
                    <a href="{% url 'users:profile' %}" class="user-btn">
                        {% if user.profile.profile_picture %}
                            <img src="{{ user.profile.profile_picture.url }}" alt="Profile picture" class="base_current-avatar">
                        {% else %}
                            <i class="fas fa-user-circle" aria-hidden="true"></i>
                        {% endif %}
                        <span class="username">{{ user.username|default:user.phone_number }}</span>
                    </a>
                    {% else %}
                    <a href="{% url 'users:register' %}" class="login-btn">{% trans "Register" %}</a>
                    {% endif %}

                    <button class="nav-toggle" id="navToggle" aria-label="Toggle navigation" aria-expanded="false">
                        <span class="nav-toggle-icon"><i class="fas fa-bars"></i></span>
                    </button>
                </div>
            </div>
        </div>
    </header>

    <nav class="category-nav" id="categoryNav">
    <div class="category-nav-header">
        <h3 class="category-nav-title">{% trans "Browse Categories" %}</h3>
        <button class="nav-close-btn" id="navCloseBtn" aria-label="Close navigation">
            <i class="fas fa-times"></i>
        </button>
    </div>        
    <ul class="category-nav-list">
        <li class="category-nav-item has-dropdown">
            <a href="#" class="category-nav-link dropdown-toggle" aria-expanded="false" aria-controls="carMenu">
                <i class="fas fa-car"></i>
                <span class="link-text">{% trans " Car Section" %}</span>
                <i class="fas fa-chevron-down dropdown-arrow"></i>
            </a>
             <ul id="carMenu" class="category-nav-dropdown">
                <li class="category-nav-item">
                    <a href="{% url 'vehicles:vehicle_list' %}" class="category-nav-link">
                        <i class="fas fa-list"></i>
                        <span class="link-text">{% trans "All Cars" %}</span>
                    </a>
                </li>
                <li class="category-nav-item">
                    <a href="{% url 'vehicles:vehicle_add' %}" class="category-nav-link">
                        <i class="fas fa-user-tie"></i>
                        <span class="link-text">{% trans "Add car" %}</span>
                    </a>
                </li>
            </ul>
        </li>
        <li class="category-nav-item {% if request.resolver_match.app_name == 'houses' %}active{% endif %}">
            <a href="{% url 'houses:house_list' %}" class="category-nav-link">
                <i class="fas fa-home"></i>
                <span class="link-text">{% trans "Houses for Sale" %}</span>
            </a>
        </li>
        <li class="category-nav-item {% if request.resolver_match.app_name == 'electronics' %}active{% endif %}">
            <a href="{% url 'electronics:product_list' %}" class="category-nav-link">
                <i class="fas fa-laptop"></i>
                <span class="link-text">{% trans "Electronics" %}</span>
            </a>
        </li>
        <li class="category-nav-item {% if request.resolver_match.app_name == 'clothings' %}active{% endif %}">
            <a href="{% url 'clothings:clothing_list' %}" class="category-nav-link">
                <i class="fas fa-tshirt"></i>
                <span class="link-text">{% trans "Clothing" %}</span>
            </a>
        </li>
        <li class="category-nav-item {% if request.resolver_match.app_name == 'poultryitems' %}active{% endif %}">
            <a href="{% url 'poultryitems:index' %}" class="category-nav-link">
                <i class="fas fa-feather-alt"></i>
                <span class="link-text">{% trans "Poultry Section" %}</span>
            </a>
        </li>
        <li class="category-nav-item has-dropdown">
            <a href="#" class="category-nav-link dropdown-toggle" aria-expanded="false" aria-controls="userMenu">
                <i class="fas fa-user-circle"></i>
                <span class="link-text">{% trans "User Actions" %}</span>
                <i class="fas fa-chevron-down dropdown-arrow"></i>
            </a>
            <ul id="userMenu" class="category-nav-dropdown">
                {% if user.is_authenticated %}
                <li class="category-nav-item">
                    <a href="{% url 'users:profile' %}" class="category-nav-link">
                        <i class="fas fa-user-cog"></i>
                        <span class="link-text">{% trans "Profile" %}</span>
                    </a>
                </li>
                <li class="category-nav-item">
                    <a href="{% url 'conversation:inbox' %}" class="category-nav-link">
                        <i class="far fa-envelope"></i>
                        <span class="link-text">{% trans "Messages" %}</span>
                        <span class="count" id="navbarUnread">0</span>
                    </a>
                </li>
                {% else %}
                <li class="category-nav-item">
                    <a href="{% url 'users:register' %}" class="category-nav-link">
                        <i class="fas fa-user-plus"></i>
                        <span class="link-text">{% trans "Register" %}</span>
                    </a>
                </li>
                {% endif %}
            </ul>
        </li>
        <li class="category-nav-item has-dropdown">
            <a href="#" class="category-nav-link dropdown-toggle" aria-expanded="false" aria-controls="adminMenu">
                <i class="fas fa-lock"></i>
                <span class="link-text">{% trans "Admin & Moderation" %}</span>
                <i class="fas fa-chevron-down dropdown-arrow"></i>
            </a>
            <ul id="adminMenu" class="category-nav-dropdown">
                {% if user.is_staff or user.is_superuser %}
                <li class="category-nav-item">
                    <a href="{% url 'base:admin_links' %}" class="category-nav-link">
                        <i class="fas fa-user-shield"></i>
                        <span class="link-text">{% trans "Admin Links" %}</span>
                    </a>
                </li>
                <li class="category-nav-item">
                    <a href="{% url 'base:message_list' %}" class="category-nav-link">
                        <i class="fas fa-inbox"></i>
                        <span class="link-text">{% trans "Messages" %}</span>
                    </a>
                </li>
                {% endif %}
                <li class="category-nav-item">
                    <a href="{% url 'users:user_list' %}" class="category-nav-link">
                        <i class="fas fa-users"></i>
                        <span class="link-text">{% trans "User List" %}</span>
                    </a>
                </li>
            </ul>
        </li>
        <li class="category-nav-item {% if request.resolver_match.app_name == 'contact' %}active{% endif %}">
            <a href="{% url 'contact:contact_us' %}" class="category-nav-link">
                <i class="fas fa-headset"></i>
                <span class="link-text">{% trans "Contact Us" %}</span>
            </a>
        </li>
        <li class="category-nav-item {% if request.resolver_match.url_name == 'about_us' %}active{% endif %}">
            <a href="{% url 'base:about_us' %}" class="category-nav-link">
                <i class="fas fa-info-circle"></i>
                <span class="link-text">{% trans "About Us" %}</span>
            </a>
        </li>
    </ul>
</nav>

<nav class="main-nav" id="navMenu">
    <div class="container">
    <ul class="nav-list">
        <li class="nav-item mega-menu {% if request.resolver_match.app_name == 'base' %}active{% endif %}">
            <a href="/" class="nav-link active"><i class="fas fa-home"></i>.</a></li>

        <li class="nav-item mega-menu {% if request.resolver_match.app_name == 'vehicles' %}active{% endif %}">
    <a href="{% url 'vehicles:vehicle_list' %}" class="nav-link">
        <i class="fas fa-car"></i>{% trans " Cars" %}
    </a>
</li>
<li class="nav-item mega-menu {% if request.resolver_match.app_name == 'houses' %}active{% endif %}">
    <a href="{% url 'houses:house_list' %}" class="nav-link">
        <i class="fas fa-home"></i>{% trans " Houses" %}
    </a>
</li>
<li class="nav-item mega-menu {% if request.resolver_match.app_name == 'electronics' %}active{% endif %}">
    <a href="{% url 'electronics:product_list' %}" class="nav-link">
        <i class="fas fa-laptop"></i>{% trans " Electronics" %}
    </a>
</li>
<li class="nav-item mega-menu {% if request.resolver_match.app_name == 'clothings' %}active{% endif %}">
    <a href="{% url 'clothings:clothing_list' %}" class="nav-link">
        <i class="fas fa-tshirt"></i>{% trans " Clothing" %}
    </a>
</li>
<li class="nav-item mega-menu {% if request.resolver_match.app_name == 'poultryitems' %}active{% endif %}">
    <a href="{% url 'poultryitems:index' %}" class="nav-link">
        <i class="fas fa-feather-alt"></i>{% trans " Poultry" %}
    </a>
</li>
    </ul>
    </div>
</nav>

    {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }}">
                    {{ message }}
                </div>
            {% endfor %}
    {% endif %}

    {% block content %}{% endblock %}
 
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <div class="footer-logo">
                        <a href="#">
                            <span class="logo-icon"><i class="fas fa-store"></i></span>
                            <span class="logo-text">{% trans "Sheger" %}<span>{% trans "City" %}</span></span>
                        </a>
                    </div>
                    <p class="footer-about">{% trans "Sheger.city is your one-stop online marketplace for cars, houses, electronics, clothing and kids toys. We connect buyers and sellers across the globe." %}</p>
                    <div class="social-links">
                        <a href="#" aria-label="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" aria-label="Telegram"><i class="fab fa-telegram"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" aria-label="LinkedIn"><i class="fab fa-linkedin-in"></i></a>
                        <a href="#" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                <div class="footer-column">
                    <h4 class="footer-title">{% trans "Categories" %}</h4>
                    <ul class="footer-links">
                        <li><a href="{% url 'vehicles:vehicle_list' %}">{% trans "Cars" %}</a></li>
                        <li><a href="{% url 'houses:house_list' %}">{% trans "Houses" %}</a></li>
                        <li><a href="{% url 'electronics:product_list' %}">{% trans "Electronics" %}</a></li>
                        <li><a href="{% url 'clothings:clothing_list' %}">{% trans "Clothing" %}</a></li>
                        <li><a href="#">{% trans "Kids Toys" %}</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4 class="footer-title">{% trans "Contact Info" %}</h4>
                    <ul class="footer-contact">
                        <li><i class="fas fa-map-marker-alt"></i> {% trans "Ethiopia / Sheger City , Gelan" %}</li>
                        <li><i class="fas fa-phone"></i> +251(0) 9 2525 9294</li>
                        <li><i class="fas fa-envelope"></i> fraollemma0506@gmail.com</li>
                        <li><i class="fas fa-clock"></i> <span class="live-clock">{{ now|date:"Y-m-d H:i" }}</span></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h4 class="footer-title">{% trans "Quick Links" %}</h4>
                    <ul class="footer-links">
                        <li><a href="#">{% trans "Home" %}</a></li>
                        <li><a href="#">{% trans "About Us" %}</a></li>
                        <li><a href="#">{% trans "Products" %}</a></li>
                        <li><a href="#">{% trans "Blog" %}</a></li>
                        <li><a href="#">Contact</a></li>
                    </ul>
                </div>
            </div>
            <div class="footer-bottom">
                <div class="copyright">
                    &copy; <span id="current-year"></span> {% trans "Sheger.city All Rights Reserved." %}
                </div>
            </div>
        </div>
    </footer>

    <script src="{% static 'base/js/base.js' %}" defer></script>
    <script>
        const UNREAD_COUNT_API_URL = "{% url 'conversation:unread_count_api' %}";
    </script>
    {% block js %}{% endblock %}
</body>
</html>

{% django_browser_reload_script %}
