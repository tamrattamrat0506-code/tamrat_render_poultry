{% extends 'base/base.html' %}
{% load i18n %}
{% load static %}

{% block css %}
<link rel="stylesheet" href="{% static 'electronics/css/product_detail.css' %}">
{% endblock %}

{% block content %}
<div class="product-detail-container">
    
    <!-- Main Content -->
    <div class="product-content">
        <!-- Image Gallery -->
        <div class="image-gallery">
            <div class="main-image-container">
                <img id="mainProductImage" src="{{ product.images.first.image.url }}" alt="Main Product Image" />
                <span class="carted-badge {% if product.is_carted %}carted{% endif %}">
                    <i class="fas fa-shopping-cart"></i>
                </span>
            </div>
            <div class="thumbnail-list">
                {% for image in product.images.all %}
                    <img class="thumbnail" src="{{ image.image.url }}" alt="Product Image">
                {% endfor %}
            </div>
            <div class="interaction-buttons">
                    <button type="button" 
                            class="interaction-button like-button" 
                            aria-label="Like this product"
                            data-item-id="{{ product.id }}">
                        <i class="fas fa-thumbs-up" aria-hidden="true"></i> 
                        <span class="interaction-count">{{ product.like_count }}</span>
                    </button>

                    <button type="button" 
                            class="interaction-button share-button" 
                            aria-label="Share this product"
                            data-item-id="{{ product.id }}">
                        <i class="fas fa-share-alt" aria-hidden="true"></i> 
                        <span class="interaction-count">{{ product.share_count }}</span>
                    </button>
                </div>
        </div>

        <!-- Product Information -->
        <div class="product-info">
            <h1>{{ product.title }}</h1>
            
            <div class="price-section">
                <span class="price">${{ product.price }}</span>
            </div>

            <div class="specs-grid">
                <div class="spec-item">
                    <i class="fas fa-tag"></i>
                    <span class="spec-label">{% trans "Category" %}</span>
                    <span class="spec-value">{{ product.category.name }}</span>
                </div>
                <div class="spec-item">
                    <i class="fas fa-certificate"></i>
                    <span class="spec-label">{% trans "Condition" %}</span>
                    <span class="spec-value">{{ product.get_condition_display }}</span>
                </div>
                <div class="spec-item">
                    <i class="fas fa-box"></i>
                    <span class="spec-label">{% trans "Stock" %}</span>
                    <span class="spec-value">{{ product.stock }}</span>
                </div>
            </div>

            <div class="description-section">
                <h3>{% trans "Description" %}</h3>
                <p>{{ product.description|linebreaks }}</p>
            </div>

            <!-- Action Buttons -->
            <div class="action-buttons">
                
                <!-- Seller Info Section -->
    {% if product.seller %}
    <div class="seller-section">
        <a href="{% url 'users:seller_profile' product.seller.id %}" class="seller-link">
            {% if product.seller.profile.profile_picture %}
                <img src="{{ product.seller.profile.profile_picture.url }}" 
                     alt="Seller profile picture" 
                     class="seller-avatar" width="60" height="60" loading="lazy">
            {% else %}
                <div class="seller-avatar default-avatar">
                    <i class="fas fa-user-circle"></i>
                </div>
            {% endif %}
        </a>
        <div class="seller-info">
            <h2 id="seller-heading" class="seller-name">
                {{ product.seller.profile.user_name|default:product.seller.phone_number }}
            </h2>
            <span class="seller-label">{% trans "Seller" %}</span>
        </div>
    </div>
    {% endif %}
                <a href="{% url 'cart:add_to_cart' app_label model_name product.id %}" class="add-to-cart-btn">
                    <i class="fas fa-shopping-cart"></i>
                    {% trans "Add to Cart" %}
                </a>
                
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block js %}
<script defer src="{% static 'electronics/js/product_detail.js' %}"></script>
{% endblock %}